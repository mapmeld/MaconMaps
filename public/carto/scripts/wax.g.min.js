/* wax - 7.0.0dev9 - v6.0.4-98-ga4cc6d6 */
/* changed: {opacity (3388), y-error (2423), remove interaction error (3297)} */
!function(a,c,b){if(typeof module!=="undefined"){module.exports=b(a,c)}else{if(typeof define==="function"&&typeof define.amd==="object"){define(b)}else{c[a]=b(a,c)}}}("bean",this,function(p,R){var I=window,K=R[p],H=/over|out/,x=/[^\.]*(?=\..*)\.|.*/,F=/\..*/,o="addEventListener",h="attachEvent",a="removeEventListener",r="detachEvent",k=document||{},y=k.documentElement||{},u=y[o],z=u?o:h,s=Array.prototype.slice,c=/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,M=/mouse.*(wheel|scroll)/i,G=/^text/i,J=/^touch|^gesture/i,D={one:1},P=(function(U,T,S){for(S=0;S<T.length;S++){U[T[S]]=1}return U})({},("click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange error abort scroll "+(u?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend message readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":"")).split(" ")),C=(function(){function T(U,V){while((V=V.parentNode)!==null){if(V===U){return true}}return false}function S(U){var V=U.relatedTarget;if(!V){return V===null}return(V!==this&&V.prefix!=="xul"&&!/document/.test(this.toString())&&!T(this,V))}return{mouseenter:{base:"mouseover",condition:S},mouseleave:{base:"mouseout",condition:S},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}})(),Q=(function(){var ab="altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which".split(" "),Y=ab.concat("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" ")),S=Y.concat("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis".split(" ")),V=ab.concat("char charCode key keyCode keyIdentifier keyLocation".split(" ")),U=ab.concat(["data"]),aa=ab.concat("touches targetTouches changedTouches scale rotation".split(" ")),X="preventDefault",ad=function(ae){return function(){if(ae[X]){ae[X]()}else{ae.returnValue=false}}},Z="stopPropagation",ac=function(ae){return function(){if(ae[Z]){ae[Z]()}else{ae.cancelBubble=true}}},W=function(ae){return function(){ae[X]();ae[Z]();ae.stopped=true}},T=function(ah,ae,ag){var af,ai;for(af=ag.length;af--;){ai=ag[af];if(!(ai in ae)&&ai in ah){ae[ai]=ah[ai]}}};return function(ai,af){var ae={originalEvent:ai,isNative:af};if(!ai){return ae}var ah,ag=ai.type,aj=ai.target||ai.srcElement;ae[X]=ad(ai);ae[Z]=ac(ai);ae.stop=W(ae);ae.target=aj&&aj.nodeType===3?aj.parentNode:aj;if(af){if(ag.indexOf("key")!==-1){ah=V;ae.keyCode=ai.which||ai.keyCode}else{if(c.test(ag)){ah=Y;ae.rightClick=ai.which===3||ai.button===2;ae.pos={x:0,y:0};if(ai.pageX||ai.pageY){ae.clientX=ai.pageX;ae.clientY=ai.pageY}else{if(ai.clientX||ai.clientY){ae.clientX=ai.clientX+k.body.scrollLeft+y.scrollLeft;ae.clientY=ai.clientY+k.body.scrollTop+y.scrollTop}}if(H.test(ag)){ae.relatedTarget=ai.relatedTarget||ai[(ag==="mouseover"?"from":"to")+"Element"]}}else{if(J.test(ag)){ah=aa}else{if(M.test(ag)){ah=S}else{if(G.test(ag)){ah=U}}}}}T(ai,ae,ah||ab)}return ae}})(),d=function(T,S){return !u&&!S&&(T===k||T===I)?y:T},n=(function(){function S(U,W,V,T,X){this.element=U;this.type=W;this.handler=V;this.original=T;this.namespaces=X;this.custom=C[W];this.isNative=P[W]&&U[z];this.eventType=u||this.isNative?W:"propertychange";this.customType=!u&&!this.isNative&&W;this.target=d(U,this.isNative);this.eventSupport=this.target[z]}S.prototype={inNamespaces:function(V){var U,T;if(!V){return true}if(!this.namespaces){return false}for(U=V.length;U--;){for(T=this.namespaces.length;T--;){if(V[U]===this.namespaces[T]){return true}}}return false},matches:function(U,T,V){return this.element===U&&(!T||this.original===T)&&(!V||this.handler===V)}};return S})(),O=(function(){var X={},W=function(ab,ae,Z,ah,af){if(!ae||ae==="*"){for(var ai in X){if(ai.charAt(0)==="$"){W(ab,ai.substr(1),Z,ah,af)}}}else{var ac=0,aa,ad=X["$"+ae],ag=ab==="*";if(!ad){return}for(aa=ad.length;ac<aa;ac++){if(ag||ad[ac].matches(ab,Z,ah)){if(!af(ad[ac],ad,ac,ae)){return}}}}},V=function(ab,ac,aa){var Z,ad=X["$"+ac];if(ad){for(Z=ad.length;Z--;){if(ad[Z].matches(ab,aa,null)){return true}}}return false},U=function(ab,ac,aa){var Z=[];W(ab,ac,aa,null,function(ad){return Z.push(ad)});return Z},Y=function(Z){(X["$"+Z.type]||(X["$"+Z.type]=[])).push(Z);return Z},T=function(Z){W(Z.element,Z.type,null,Z.handler,function(ab,ac,aa){ac.splice(aa,1);if(ac.length===0){delete X["$"+ab.type]}return false})},S=function(){var aa,Z=[];for(aa in X){if(aa.charAt(0)==="$"){Z=Z.concat(X[aa])}}return Z};return{has:V,get:U,put:Y,del:T,entries:S}})(),L=u?function(S,U,T,V){S[V?o:a](U,T,false)}:function(S,U,T,W,V){if(V&&W&&S["_on"+V]===null){S["_on"+V]=0}S[W?h:r]("on"+U,T)},B=function(T,U,S){return function(V){V=Q(V||((this.ownerDocument||this.document||this).parentWindow||I).event,true);return U.apply(T,[V].concat(S))}},f=function(U,W,V,X,T,S){return function(Y){if(X?X.apply(this,arguments):u?true:Y&&Y.propertyName==="_on"+V||!Y){if(Y){Y=Q(Y||((this.ownerDocument||this.document||this).parentWindow||I).event,S)}W.apply(U,Y&&(!T||T.length===0)?arguments:s.call(arguments,Y?0:1).concat(T))}}},w=function(W,S,U,T,V){return function(){W(S,U,V);T.apply(this,arguments)}},b=function(W,U,aa,S){var X,V,Z,Y=(U&&U.replace(F,"")),T=O.get(W,Y,aa);for(X=0,V=T.length;X<V;X++){if(T[X].inNamespaces(S)){if((Z=T[X]).eventSupport){L(Z.target,Z.eventType,Z.handler,false,Z.type)}O.del(Z)}}},j=function(T,Z,V,Y,S){var W,U=Z.replace(F,""),X=Z.replace(x,"").split(".");if(O.has(T,U,V)){return T}if(U==="unload"){V=w(b,T,U,V,Y)}if(C[U]){if(C[U].condition){V=f(T,V,U,C[U].condition,true)}U=C[U].base||U}W=O.put(new n(T,U,V,Y,X[0]&&X));W.handler=W.isNative?B(T,W.handler,S):f(T,W.handler,U,false,S,false);if(W.eventSupport){L(W.target,W.eventType,W.handler,true,W.customType)}},q=function(S,T,U){return function(X){var W,V,Y=typeof S==="string"?U(S,this):S;for(W=X.target;W&&W!==this;W=W.parentNode){for(V=Y.length;V--;){if(Y[V]===W){return T.apply(W,arguments)}}}}},A=function(W,Z,ab){var V,U,aa,T,X,Y=b,S=Z&&typeof Z==="string";if(S&&Z.indexOf(" ")>0){Z=Z.split(" ");for(X=Z.length;X--;){A(W,Z[X],ab)}return W}aa=S&&Z.replace(F,"");if(aa&&C[aa]){aa=C[aa].type}if(!Z||S){if(T=S&&Z.replace(x,"")){T=T.split(".")}Y(W,aa,ab,T)}else{if(typeof Z==="function"){Y(W,null,Z)}else{for(V in Z){if(Z.hasOwnProperty(V)){A(W,V,Z[V])}}}}return W},g=function(U,ac,aa,S,T){var Y,W,V,X,Z=aa,ab=aa&&typeof aa==="string";if(ac&&!aa&&typeof ac==="object"){for(Y in ac){if(ac.hasOwnProperty(Y)){g.apply(this,[U,Y,ac[Y]])}}}else{X=arguments.length>3?s.call(arguments,3):[];W=(ab?aa:ac).split(" ");ab&&(aa=q(ac,(Z=S),T))&&(X=s.call(X,1));this===D&&(aa=w(A,U,ac,aa,Z));for(V=W.length;V--;){j(U,W[V],aa,Z,X)}}return U},l=function(){return g.apply(D,arguments)},N=u?function(T,V,U){var S=k.createEvent(T?"HTMLEvents":"UIEvents");S[T?"initEvent":"initUIEvent"](V,true,true,I,1);U.dispatchEvent(S)}:function(S,U,T){T=d(T,S);S?T.fireEvent("on"+U,k.createEventObject()):T["_on"+U]++},v=function(V,aa,Y){var W,U,T,Z,S,X=aa.split(" ");for(W=X.length;W--;){aa=X[W].replace(F,"");if(Z=X[W].replace(x,"")){Z=Z.split(".")}if(!Z&&!Y&&V[z]){N(P[aa],aa,V)}else{S=O.get(V,aa);Y=[false].concat(Y);for(U=0,T=S.length;U<T;U++){if(S[U].inNamespaces(Z)){S[U].handler.apply(V,Y)}}}}return V},t=function(V,X,W){var U=0,T=O.get(X,W),S=T.length;for(;U<S;U++){T[U].original&&g(V,T[U].type,T[U].original)}return V},E={add:g,one:l,remove:A,clone:t,fire:v,noConflict:function(){R[p]=K;return this}};if(I[h]){var e=function(){var T,S=O.entries();for(T in S){if(S[T].type&&S[T].type!=="unload"){A(S[T].element,S[T].type)}}I[r]("onunload",e);I.CollectGarbage&&I.CollectGarbage()};I[h]("onunload",e)}return E});var html4={};html4.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10};html4.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};html4.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128};html4.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,nobr:0,noembed:4,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0};html4.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2};html4.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"body::background":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0};html4.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0};html4.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"body::background":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2};var html=(function(l){var b;if("script"==="SCRIPT".toLowerCase()){b=function(C){return C.toLowerCase()}}else{b=function(C){return C.replace(/[A-Z]/g,function(D){return String.fromCharCode(D.charCodeAt(0)|32)})}}var s={lt:"<",gt:">",amp:"&",nbsp:"\240",quot:'"',apos:"'"};var q=/^(?:https?|mailto|data)$/i;var o=/^#(\d+)$/;var y=/^#x([0-9A-Fa-f]+)$/;function j(D){D=b(D);if(s.hasOwnProperty(D)){return s[D]}var C=D.match(o);if(C){return String.fromCharCode(parseInt(C[1],10))}else{if(!!(C=D.match(y))){return String.fromCharCode(parseInt(C[1],16))}}return""}function c(D,C){return j(C)}var v=/\0/g;function n(C){return C.replace(v,"")}var w=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g;function e(C){return C.replace(w,c)}var u=/&/g;var B=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;var a=/</g;var f=/>/g;var p=/\"/g;var h=/\=/g;function g(C){return C.replace(u,"&amp;").replace(a,"&lt;").replace(f,"&gt;").replace(p,"&#34;").replace(h,"&#61;")}function k(C){return C.replace(B,"&amp;$1").replace(a,"&lt;").replace(f,"&gt;")}var z=new RegExp("^\\s*(?:"+("(?:([a-z][a-z-]*)"+("(\\s*=\\s*"+("(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*)")+")")+"?)")+"|(/?>)|[\\s\\S][^a-z\\s>]*)","i");var A=new RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<!--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");function r(C){return function D(O,M){O=String(O);var P=null;var H=false;var F=[];var I=void 0;var J=void 0;var G=void 0;if(C.startDoc){C.startDoc(M)}while(O){var L=O.match(H?z:A);O=O.substring(L[0].length);if(H){if(L[1]){var K=b(L[1]);var R;if(L[2]){var N=L[3];switch(N.charCodeAt(0)){case 34:case 39:N=N.substring(1,N.length-1);break}R=e(n(N))}else{R=K}F.push(K,R)}else{if(L[4]){if(J!==void 0){if(G){if(C.startTag){C.startTag(I,F,M)}}else{if(C.endTag){C.endTag(I,M)}}}if(G&&(J&(l.eflags.CDATA|l.eflags.RCDATA))){if(P===null){P=b(O)}else{P=P.substring(P.length-O.length)}var Q=P.indexOf("</"+I);if(Q<0){Q=O.length}if(Q){if(J&l.eflags.CDATA){if(C.cdata){C.cdata(O.substring(0,Q),M)}}else{if(C.rcdata){C.rcdata(k(O.substring(0,Q)),M)}}O=O.substring(Q)}}I=J=G=void 0;F.length=0;H=false}}}else{if(L[1]){if(C.pcdata){C.pcdata(L[0],M)}}else{if(L[3]){G=!L[2];H=true;I=b(L[3]);J=l.ELEMENTS.hasOwnProperty(I)?l.ELEMENTS[I]:void 0}else{if(L[4]){if(C.pcdata){C.pcdata(L[4],M)}}else{if(L[5]){if(C.pcdata){var E=L[5];C.pcdata(E==="<"?"&lt;":E===">"?"&gt;":"&amp;",M)}}}}}}}if(C.endDoc){C.endDoc(M)}}}function x(D){var C;var E;return r({startDoc:function(F){C=[];E=false},startTag:function(I,L,G){if(E){return}if(!l.ELEMENTS.hasOwnProperty(I)){return}var F=l.ELEMENTS[I];if(F&l.eflags.FOLDABLE){return}else{if(F&l.eflags.UNSAFE){E=!(F&l.eflags.EMPTY);return}}L=D(I,L);if(L){if(!(F&l.eflags.EMPTY)){C.push(I)}G.push("<",I);for(var H=0,M=L.length;H<M;H+=2){var J=L[H],K=L[H+1];if(K!==null&&K!==void 0){G.push(" ",J,'="',g(K),'"')}}G.push(">")}},endTag:function(J,H){if(E){E=false;return}if(!l.ELEMENTS.hasOwnProperty(J)){return}var F=l.ELEMENTS[J];if(!(F&(l.eflags.UNSAFE|l.eflags.EMPTY|l.eflags.FOLDABLE))){var G;if(F&l.eflags.OPTIONAL_ENDTAG){for(G=C.length;--G>=0;){var K=C[G];if(K===J){break}if(!(l.ELEMENTS[K]&l.eflags.OPTIONAL_ENDTAG)){return}}}else{for(G=C.length;--G>=0;){if(C[G]===J){break}}}if(G<0){return}for(var I=C.length;--I>G;){var K=C[I];if(!(l.ELEMENTS[K]&l.eflags.OPTIONAL_ENDTAG)){H.push("</",K,">")}}C.length=G;H.push("</",J,">")}},pcdata:function(G,F){if(!E){F.push(G)}},rcdata:function(G,F){if(!E){F.push(G)}},cdata:function(G,F){if(!E){F.push(G)}},endDoc:function(F){for(var G=C.length;--G>=0;){F.push("</",C[G],">")}C.length=0}})}var t=new RegExp("^(?:([^:/?#]+):)?");function d(G,E,F){var C=[];x(function D(K,O){for(var J=0;J<O.length;J+=2){var L=O[J];var M=O[J+1];var I=null,H;if((H=K+"::"+L,l.ATTRIBS.hasOwnProperty(H))||(H="*::"+L,l.ATTRIBS.hasOwnProperty(H))){I=l.ATTRIBS[H]}if(I!==null){switch(I){case l.atype.NONE:break;case l.atype.SCRIPT:case l.atype.STYLE:M=null;break;case l.atype.ID:case l.atype.IDREF:case l.atype.IDREFS:case l.atype.GLOBAL_NAME:case l.atype.LOCAL_NAME:case l.atype.CLASSES:M=F?F(M):M;break;case l.atype.URI:var N=(""+M).match(t);if(!N){M=null}else{if(!N[1]||q.test(N[1])){M=E&&E(M)}else{M=null}}break;case l.atype.URI_FRAGMENT:if(M&&"#"===M.charAt(0)){M=F?F(M):M;if(M){M="#"+M}}else{M=null}break;default:M=null;break}}else{M=null}O[J+1]=M}return O})(G,C);return C.join("")}return{escapeAttrib:g,makeHtmlSanitizer:x,makeSaxParser:r,normalizeRCData:k,sanitize:d,unescapeEntities:e}})(html4);var html_sanitize=html.sanitize;if(typeof window!=="undefined"){window.html=html;window.html_sanitize=html_sanitize}html4.ATTRIBS["*::style"]=0;html4.ELEMENTS.style=0;html4.ATTRIBS["a::target"]=0;html4.ELEMENTS.video=0;html4.ATTRIBS["video::src"]=0;html4.ATTRIBS["video::poster"]=0;html4.ATTRIBS["video::controls"]=0;html4.ELEMENTS.audio=0;html4.ATTRIBS["audio::src"]=0;html4.ATTRIBS["video::autoplay"]=0;html4.ATTRIBS["video::controls"]=0;
var Mustache=(typeof module!=="undefined"&&module.exports)||{};(function(y){y.name="mustache.js";y.version="0.5.0-dev";y.tags=["{{","}}"];y.parse=o;y.compile=e;y.render=x;y.clearCache=w;y.to_html=function(C,A,B,D){var z=x(C,A,B);if(typeof D==="function"){D(z)}else{return z}};var u=Object.prototype.toString;var f=Array.isArray;var b=Array.prototype.forEach;var g=String.prototype.trim;var j;if(f){j=f}else{j=function(z){return u.call(z)==="[object Array]"}}var t;if(b){t=function(A,B,z){return b.call(A,B,z)}}else{t=function(C,D,B){for(var A=0,z=C.length;A<z;++A){D.call(B,C[A],A,C)}}}var l=/^\s*$/;function c(z){return l.test(z)}var r;if(g){r=function(z){return z==null?"":g.call(z)}}else{var p,h;if(c("\xA0")){p=/^\s+/;h=/\s+$/}else{p=/^[\s\xA0]+/;h=/[\s\xA0]+$/}r=function(z){return z==null?"":String(z).replace(p,"").replace(h,"")}}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function q(z){return String(z).replace(/[&<>"'\/]/g,function(A){return d[A]||A})}function n(F,H,I,B){B=B||"<template>";var J=H.split("\n"),z=Math.max(I-3,0),C=Math.min(J.length,I+3),A=J.slice(z,C);var G;for(var D=0,E=A.length;D<E;++D){G=D+z+1;A[D]=(G===I?" >> ":"    ")+A[D]}F.template=H;F.line=I;F.file=B;F.message=[B+":"+I,A.join("\n"),"",F.message].join("\n");return F}function v(z,H,G){if(z==="."){return H[H.length-1]}var F=z.split(".");var D=F.length-1;var E=F[D];var I,A,C=H.length,B,J;while(C){J=H.slice(0);A=H[--C];B=0;while(B<D){A=A[F[B++]];if(A==null){break}J.push(A)}if(A&&typeof A==="object"&&E in A){I=A[E];break}}if(typeof I==="function"){I=I.call(J[J.length-1])}if(I==null){return G}return I}function k(C,z,G,B){var A="";var E=v(C,z);if(B){if(E==null||E===false||(j(E)&&E.length===0)){A+=G()}}else{if(j(E)){t(E,function(H){z.push(H);A+=G();z.pop()})}else{if(typeof E==="object"){z.push(E);A+=G();z.pop()}else{if(typeof E==="function"){var D=z[z.length-1];var F=function(H){return x(H,D)};A+=E.call(D,G(),F)||""}else{if(E){A+=G()}}}}}return A}function o(ab,D){D=D||{};var M=D.tags||y.tags,N=M[0],I=M[M.length-1];var A=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'];var H=[],ac=false,Z=false;var X=function(){if(ac&&!Z&&!D.space){while(H.length){A.splice(H.pop(),1)}}else{H=[]}ac=false;Z=false};var U=[],R,E,O;var W=function(ad){M=r(ad).split(/\s+/);E=M[0];O=M[M.length-1]};var L=function(ad){A.push('";',R,'\nvar partial = partials["'+r(ad)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')};var z=function(af,ad){var ae=r(af);if(ae===""){throw n(new Error("Section name may not be empty"),ab,K,D.file)}U.push({name:ae,inverted:ad});A.push('";',R,'\nvar name = "'+ae+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')};var G=function(ad){z(ad,true)};var V=function(ae){var ad=r(ae);var ag=U.length!=0&&U[U.length-1].name;if(!ag||ad!=ag){throw n(new Error('Section named "'+ad+'" was never opened'),ab,K,D.file)}var af=U.pop();A.push('";',"\n    return buffer;","\n  };","\n})();");if(af.inverted){A.push("\nbuffer += renderSection(name,stack,callback,true);")}else{A.push("\nbuffer += renderSection(name,stack,callback);")}A.push('\nbuffer += "')};var Y=function(ad){A.push('";',R,'\nbuffer += lookup("'+r(ad)+'",stack,"");','\nbuffer += "')};var B=function(ad){A.push('";',R,'\nbuffer += escapeHTML(lookup("'+r(ad)+'",stack,""));','\nbuffer += "')};var K=1,aa,F;for(var S=0,T=ab.length;S<T;++S){if(ab.slice(S,S+N.length)===N){S+=N.length;aa=ab.substr(S,1);R="\nline = "+K+";";E=N;O=I;ac=true;switch(aa){case"!":S++;F=null;break;case"=":S++;I="="+I;F=W;break;case">":S++;F=L;break;case"#":S++;F=z;break;case"^":S++;F=G;break;case"/":S++;F=V;break;case"{":I="}"+I;case"&":S++;Z=true;F=Y;break;default:Z=true;F=B}var C=ab.indexOf(I,S);if(C===-1){throw n(new Error('Tag "'+N+'" was not closed properly'),ab,K,D.file)}var Q=ab.substring(S,C);if(F){F(Q)}var P=0;while(~(P=Q.indexOf("\n",P))){K++;P++}S=C+I.length-1;N=E;I=O}else{aa=ab.substr(S,1);switch(aa){case'"':case"\\":Z=true;A.push("\\"+aa);break;case"\r":break;case"\n":H.push(A.length);A.push("\\n");X();K++;break;default:if(c(aa)){H.push(A.length)}else{Z=true}A.push(aa)}}}if(U.length!=0){throw n(new Error('Section "'+U[U.length-1].name+'" was not closed properly'),ab,K,D.file)}X();A.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var J=A.join("").replace(/buffer \+= "";\n/g,"");if(D.debug){if(typeof console!="undefined"&&console.log){console.log(J)}else{if(typeof print==="function"){print(J)}}}return J}function s(D,B){var A="view,partials,stack,lookup,escapeHTML,renderSection,render";var z=o(D,B);var C=new Function(A,z);return function(F,G){G=G||{};var E=[F];try{return C(F,G,E,v,q,k,x)}catch(H){throw n(H.error,D,H.line,B.file)}}}var a={};function w(){a={}}function e(A,z){z=z||{};if(z.cache!==false){if(!a[A]){a[A]=s(A,z)}return a[A]}return s(A,z)}function x(B,z,A){return e(B)(z,A)}})(Mustache);
!function(d,c){typeof module!="undefined"?module.exports=c():typeof define=="function"&&define.amd?define(d,c):this[d]=c()}("reqwest",function(){function handleReadyState(a,b,c){return function(){a&&a[readyState]==4&&(twoHundo.test(a.status)?b(a):c(a))}}function setHeaders(a,b){var c=b.headers||{},d;c.Accept=c.Accept||defaultHeaders.accept[b.type]||defaultHeaders.accept["*"],!b.crossOrigin&&!c[requestedWith]&&(c[requestedWith]=defaultHeaders.requestedWith),c[contentType]||(c[contentType]=b.contentType||defaultHeaders.contentType);for(d in c){c.hasOwnProperty(d)&&a.setRequestHeader(d,c[d])}}function generalCallback(a){lastValue=a}function urlappend(a,b){return a+(/\?/.test(a)?"&":"?")+b}function handleJsonp(a,b,c,d){var e=uniqid++,f=a.jsonpCallback||"callback",g=a.jsonpCallbackName||"reqwest_"+e,h=new RegExp("((^|\\?|&)"+f+")=([^&]+)"),i=d.match(h),j=doc.createElement("script"),k=0;i?i[3]==="?"?d=d.replace(h,"$1="+g):g=i[3]:d=urlappend(d,f+"="+g),win[g]=generalCallback,j.type="text/javascript",j.src=d,j.async=!0,typeof j.onreadystatechange!="undefined"&&(j.event="onclick",j.htmlFor=j.id="_reqwest_"+e),j.onload=j.onreadystatechange=function(){if(j[readyState]&&j[readyState]!=="complete"&&j[readyState]!=="loaded"||k){return !1}j.onload=j.onreadystatechange=null,j.onclick&&j.onclick(),a.success&&a.success(lastValue),lastValue=undefined,head.removeChild(j),k=1},head.appendChild(j)}function getRequest(a,b,c){var d=(a.method||"GET").toUpperCase(),e=typeof a=="string"?a:a.url,f=a.processData!==!1&&a.data&&typeof a.data!="string"?reqwest.toQueryString(a.data):a.data||null,g;return(a.type=="jsonp"||d=="GET")&&f&&(e=urlappend(e,f),f=null),a.type=="jsonp"?handleJsonp(a,b,c,e):(g=xhr(),g.open(d,e,!0),setHeaders(g,a),g.onreadystatechange=handleReadyState(g,b,c),a.before&&a.before(g),g.send(f),g)}function Reqwest(a,b){this.o=a,this.fn=b,init.apply(this,arguments)}function setType(a){var b=a.match(/\.(json|jsonp|html|xml)(\?|$)/);return b?b[1]:"js"}function init(o,fn){function complete(a){o.timeout&&clearTimeout(self.timeout),self.timeout=null,o.complete&&o.complete(a)}function success(resp){var r=resp.responseText;if(r){switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r}}fn(resp),o.success&&o.success(resp),complete(resp)}function error(a,b,c){o.error&&o.error(a,b,c),complete(a)}this.url=typeof o=="string"?o:o.url,this.timeout=null;var type=o.type||setType(this.url),self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),this.request=getRequest(o,success,error)}function reqwest(a,b){return new Reqwest(a,b)}function normalize(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function serial(a,b){var c=a.name,d=a.tagName.toLowerCase(),e=function(a){a&&!a.disabled&&b(c,normalize(a.attributes.value&&a.attributes.value.specified?a.value:a.text))};if(a.disabled||!c){return}switch(d){case"input":if(!/reset|button|image|file/i.test(a.type)){var f=/checkbox/i.test(a.type),g=/radio/i.test(a.type),h=a.value;(!f&&!g||a.checked)&&b(c,normalize(f&&h===""?"on":h))}break;case"textarea":b(c,normalize(a.value));break;case"select":if(a.type.toLowerCase()==="select-one"){e(a.selectedIndex>=0?a.options[a.selectedIndex]:null)}else{for(var i=0;a.length&&i<a.length;i++){a.options[i].selected&&e(a.options[i])}}}}function eachFormElement(){var a=this,b,c,d,e=function(b,c){for(var e=0;e<c.length;e++){var f=b[byTag](c[e]);for(d=0;d<f.length;d++){serial(f[d],a)}}};for(c=0;c<arguments.length;c++){b=arguments[c],/input|select|textarea/i.test(b.tagName)&&serial(b,a),e(b,["input","select","textarea"])}}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var a={};return eachFormElement.apply(function(b,c){b in a?(a[b]&&!isArray(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments),a}var win=window,doc=document,twoHundo=/^20\d$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,lastValue,xmlHttpRequest="XMLHttpRequest",isArray=typeof Array.isArray=="function"?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"},requestedWith:xmlHttpRequest},xhr=win[xmlHttpRequest]?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};return Reqwest.prototype={abort:function(){this.request.abort()},retry:function(){init.call(this,this.o,this.fn)}},reqwest.serializeArray=function(){var a=[];return eachFormElement.apply(function(b,c){a.push({name:b,value:c})},arguments),a},reqwest.serialize=function(){if(arguments.length===0){return""}var a,b,c=Array.prototype.slice.call(arguments,0);return a=c.pop(),a&&a.nodeType&&c.push(a)&&(a=null),a&&(a=a.type),a=="map"?b=serializeHash:a=="array"?b=reqwest.serializeArray:b=serializeQueryString,b.apply(null,c)},reqwest.toQueryString=function(a){var b="",c,d=encodeURIComponent,e=function(a,c){b+=d(a)+"="+d(c)+"&"};if(isArray(a)){for(c=0;a&&c<a.length;c++){e(a[c].name,a[c].value)}}else{for(var f in a){if(!Object.hasOwnProperty.call(a,f)){continue}var g=a[f];if(isArray(g)){for(c=0;c<g.length;c++){e(f,g[c])}}else{e(f,a[f])}}}return b.replace(/&$/,"").replace(/%20/g,"+")},reqwest.compat=function(a,b){return a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp)),new Reqwest(a,b)},reqwest});wax=wax||{};wax.attribution=function(){var c={};var b=document.createElement("div");b.className="map-attribution";c.content=function(a){if(typeof a==="undefined"){return b.innerHTML}b.innerHTML=wax.u.sanitize(a);return this};c.element=function(){return b};c.init=function(){return this};return c};wax=wax||{};wax.bwdetect=function(b,h){var e={},a=b.threshold||400,d="http://a.tiles.mapbox.com/mapbox/1.0.0/blue-marble-topo-bathy-jul/0/0/0.png?preventcache="+(+new Date()),g=1,f=b.auto===undefined?true:b.auto;function c(){wax.bw=-1;var j=new Image();j.src=d;var l=true;var k=setTimeout(function(){if(l&&wax.bw==-1){e.bw(0);l=false}},a);j.onload=function(){if(l&&wax.bw==-1){clearTimeout(k);e.bw(1);l=false}}}e.bw=function(j){if(!arguments.length){return g}var k=g;if(wax.bwlisteners&&wax.bwlisteners.length){(function(){listeners=wax.bwlisteners;wax.bwlisteners=[];for(i=0;i<listeners;i++){listeners[i](j)}})()}wax.bw=j;if(g!=(g=j)){h(j)}};e.add=function(){if(f){c()}return this};if(wax.bw==-1){wax.bwlisteners=wax.bwlisteners||[];wax.bwlisteners.push(e.bw)}else{if(wax.bw!==undefined){e.bw(wax.bw)}else{e.add()}}return e};wax.formatter=function(x){var formatter={},f;if(x&&typeof x==="string"){try{eval("f = "+x)}catch(e){if(console){console.log(e)}}}else{if(x&&typeof x==="function"){f=x}else{f=function(){}}}formatter.format=function(options,data){try{return wax.u.sanitize(f(options,data))}catch(e){if(console){console.log(e)}}};return formatter};wax.gi=function(b,d){d=d||{};var a={},c=d.resolution||4,f=d.tileSize||256;function e(g){if(g>=93){g--}if(g>=35){g--}g-=32;return g}a.grid_tile=function(){return b};a.getKey=function(g,h){if(!(b&&b.grid)){return}if((h<0)||(g<0)){return}if((Math.floor(h)>=f)||(Math.floor(g)>=f)){return}return e(b.grid[Math.floor((h)/c)].charCodeAt(Math.floor((g)/c)))};a.gridFeature=function(g,k){var h=this.getKey(g,k),j=b.keys;if(j&&j[h]&&b.data[j[h]]){return b.data[j[h]]}};a.tileFeature=function(h,k,g){if(!b){return}var j=wax.u.offset(g);feature=this.gridFeature(h-j.left,k-j.top);return feature};return a};wax.gm=function(){var c=4,f={},e={},g,d;var b=function(h){if(h){return h.replace(/(\.png|\.jpg|\.jpeg)(\d*)/,".grid.json")}};function a(j){if(typeof j==="string"){j=[j]}return function h(l){if(!l){return}var n=new RegExp("/(\\d+)\\/(\\d+)\\/(\\d+)\\.[\\w\\._]+");var k=n.exec(l);if(!k){return}return j[parseInt(k[2],10)%j.length].replace(/\{z\}/g,k[1]).replace(/\{x\}/g,k[2]).replace(/\{y\}/g,k[3])}}e.formatter=function(h){if(!arguments.length){return d}d=wax.formatter(h);return e};e.template=function(h){if(!arguments.length){return d}d=wax.template(h);return e};e.gridUrl=function(h){if(!arguments.length){return b}if(!h){b=function(){return null}}else{b=typeof h==="function"?h:a(h)}return e};e.getGrid=function(j,k){var h=b(j);if(!d||!h){return k(null,null)}wax.request.get(h,function(n,l){if(n){return k(n,null)}k(null,wax.gi(l,{formatter:d,resolution:c}))});return e};e.tilejson=function(h){if(!arguments.length){return g}if(h.template){e.template(h.template)}else{if(h.formatter){e.formatter(h.formatter)}else{d=undefined}}e.gridUrl(h.grids);if(h.resolution){c=h.resolution}g=h;return e};return e};wax=wax||{};wax.hash=function(k){k=k||{};var h,d={},g=90-1e-8;function f(){return location.hash.substring(1)}function e(o){var n=window.location;n.replace(n.toString().replace((n.hash||/$/),"#"+o))}function a(o){var l=o.split("/");for(var n=0;n<l.length;n++){l[n]=Number(l[n]);if(isNaN(l[n])){return true}}if(l.length<3){return true}else{if(l.length==3){k.setCenterZoom(l)}}}function b(){var l=k.getCenterZoom();if(h!==l){h=l;e(h)}}function c(l){if(l===h){return}if(a(h=l)){b()}}var j=wax.u.throttle(b,500);d.add=function(){c(f());k.bindChange(j);return d};d.remove=function(){k.unbindChange(j);return d};return d};wax=wax||{};wax.interaction=function(){var q=wax.gm(),g={},b=false,c=false,e,o=4,a,r,v,k,u,t;var p={mousemove:h,touchstart:d,mousedown:d};var n={touchend:s,touchmove:s,touchcancel:f};function l(y){var x=a();if(!y){return false}for(var w=0;w<x.length;w++){if((x[w][0]<y.y)&&((x[w][0]+256)>y.y)&&(x[w][1]<y.x)&&((x[w][1]+256)>y.x)){return x[w][2]}}return false}function j(){if(c){window.clearTimeout(c);c=null;return true}else{return false}}function h(w){if(b){return}var x=wax.u.eventoffset(w);g.screen_feature(x,function(y){if(y){bean.fire(g,"on",{parent:k(),data:y,formatter:q.formatter().format,e:w})}else{bean.fire(g,"off")}})}function d(w){if(j()){return}b=true;e=wax.u.eventoffset(w);if(w.type==="mousedown"){bean.add(document.body,"click",s);bean.add(document.body,"mouseup",s)}else{if(w.type==="touchstart"&&w.touches.length===1){bean.fire(g,"off");bean.add(k(),n)}}}function f(){bean.remove(k(),n);b=false}function s(y){var w={},z=wax.u.eventoffset(y);b=false;for(var x in y){w[x]=y[x]}bean.remove(document.body,"mouseup",s);bean.remove(k(),n);if(y.type==="touchend"){g.click(y,e)}else{if(Math.round(z.y/o)===Math.round(e.y/o)&&Math.round(z.x/o)===Math.round(e.x/o)){c=window.setTimeout(function(){c=null;g.click(w,z)},300)}}return s}g.click=function(w,x){g.screen_feature(x,function(y){if(y){bean.fire(g,"on",{parent:k(),data:y,formatter:q.formatter().format,e:w})}})};g.screen_feature=function(y,x){var w=l(y);if(!w){x(null)}q.getGrid(w.src,function(B,A){if(B||!A){return x(null)}var z=A.tileFeature(y.x,y.y,w);x(z)})};g.attach=function(w){if(!arguments.length){return r}r=w;return g};g.detach=function(w){if(!arguments.length){return v}v=w;return g};g.map=function(w){if(!arguments.length){return u}u=w;if(r){r(u)}bean.add(k(),p);bean.add(k(),"touchstart",d);return g};g.grid=function(w){if(!arguments.length){return a}a=w;return g};g.remove=function(w){if(v){v(u)}bean.remove(k(),p);bean.fire(g,"remove");return g};g.tilejson=function(w){if(!arguments.length){return q.tilejson()}q.tilejson(w);return g};g.formatter=function(){return q.formatter()};g.on=function(x,w){bean.add(g,x,w);return g};g.off=function(x,w){bean.remove(g,x,w);return g};g.gridmanager=function(w){if(!arguments.length){return q}q=w;return g};g.parent=function(w){k=w;return g};return g};var wax=wax||{};wax.legend=function(){var b,c={},a;c.element=function(){return a};c.content=function(d){if(!arguments.length){return b.innerHTML}b.innerHTML=wax.u.sanitize(d);b.style.display="block";if(b.innerHTML===""){b.style.display="none"}return c};c.add=function(){a=document.createElement("div");a.className="map-legends";b=a.appendChild(document.createElement("div"));b.className="map-legend";b.style.display="none";return c};return c.add()};var wax=wax||{};wax.location=function(){var b={};function a(d){if((d.e.type==="mousemove"||!d.e.type)){return}else{var c=d.formatter({format:"location"},d.data);if(c){window.location.href=c}}}b.events=function(){return{on:a}};return b};var wax=wax||{};wax.movetip={};wax.movetip=function(){var d=false,k={},a,b,l,j;function g(o){var n=wax.u.eventoffset(o);if((a.height+n.y)>(b.top+b.height)&&(b.height>a.height)){n.y-=a.height;l.className+=" flip-y"}if((a.width+n.x)>(b.left+b.width)){n.x-=a.width;l.className+=" flip-x"}l.style.left=n.x+"px";l.style.top=n.y+"px"}function h(n){var o=document.createElement("div");o.className="map-tooltip map-tooltip-0";o.innerHTML=n;return o}function e(){if(l){l.parentNode.removeChild(l);l=null}}function f(s){var q;if(d){return}if((s.e.type==="mousemove"||!s.e.type)){q=s.formatter({format:"teaser"},s.data);if(!q){return}e();j.style.cursor="pointer";l=document.body.appendChild(h(q))}else{q=s.formatter({format:"teaser"},s.data);if(!q){return}e();var n=document.body.appendChild(h(q));n.className+=" map-popup";var r=n.appendChild(document.createElement("a"));r.href="#close";r.className="close";r.innerHTML="Close";d=true;l=n;a=wax.u.offset(l);b=wax.u.offset(j);g(s.e);bean.add(r,"click touchend",function p(o){o.stop();e();d=false})}if(l){a=wax.u.offset(l);b=wax.u.offset(j);g(s.e)}}function c(){j.style.cursor="default";if(!d){e()}}k.parent=function(n){if(!arguments.length){return j}j=n;return k};k.events=function(){return{on:f,off:c}};return k};var wax=wax||{};wax.request={cache:{},locks:{},promises:{},get:function(a,c){if(this.cache[a]){return c(this.cache[a][0],this.cache[a][1])}else{this.promises[a]=this.promises[a]||[];this.promises[a].push(c);if(this.locks[a]){return}var b=this;this.locks[a]=true;reqwest({url:a+(~a.indexOf("?")?"&":"?")+"callback=grid",type:"jsonp",jsonpCallback:"callback",success:function(e){b.locks[a]=false;b.cache[a]=[null,e];for(var d=0;d<b.promises[a].length;d++){b.promises[a][d](b.cache[a][0],b.cache[a][1])}},error:function(e){b.locks[a]=false;b.cache[a]=[e,null];for(var d=0;d<b.promises[a].length;d++){b.promises[a][d](b.cache[a][0],b.cache[a][1])}}})}}};wax.template=function(a){var b={};b.format=function(c,e){var f={};for(var d in e){f[d]=e[d]}if(c.format){f["__"+c.format+"__"]=true}return wax.u.sanitize(Mustache.to_html(a,f))};return b};if(!wax){var wax={}}wax.tilejson=function(a,b){reqwest({url:a+(~a.indexOf("?")?"&":"?")+"callback=grid",type:"jsonp",jsonpCallback:"callback",success:b,error:b})};var wax=wax||{};wax.tooltip={};wax.tooltip=function(){var d=false,a=false,n={},h=[],k,c,l;if(document.body.style["-webkit-transition"]!==undefined){c="webkitTransitionEnd"}else{if(document.body.style.MozTransition!==undefined){c="transitionend"}}function j(o){var p=document.createElement("div");p.className="map-tooltip map-tooltip-0";p.innerHTML=o;return p}function e(){if(this.parentNode){this.parentNode.removeChild(this)}}function f(){var o;while(o=h.pop()){if(a&&c){bean.add(o,c,e);o.className+=" map-fade"}else{if(o.parentNode){o.parentNode.removeChild(o)}}}}function g(t){var r;if(t.e.type==="mousemove"||!t.e.type){if(!d){r=t.content||t.formatter({format:"teaser"},t.data);if(!r||r==k){return}f();l.style.cursor="pointer";h.push(l.appendChild(j(r)));k=r}}else{r=t.content||t.formatter({format:"full"},t.data);if(!r){if(t.e.type&&t.e.type.match(/touch/)){r=t.content||t.formatter({format:"teaser"},t.data)}if(!r){return}}f();l.style.cursor="pointer";var p=l.appendChild(j(r));p.className+=" map-popup";var s=p.appendChild(document.createElement("a"));s.href="#close";s.className="close";s.innerHTML="Close";d=true;h.push(p);bean.add(s,"touchstart mousedown",function(o){o.stop()});bean.add(s,"click touchend",function q(o){o.stop();f();d=false})}}function b(){l.style.cursor="default";k=null;if(!d){f()}}n.parent=function(o){if(!arguments.length){return l}l=o;return n};n.animate=function(o){if(!arguments.length){return a}a=o;return n};n.events=function(){return{on:g,off:b}};return n};var wax=wax||{};wax.u={offset:function(b){var a=b.offsetWidth||parseInt(b.style.width,10),j=b.offsetHeight||parseInt(b.style.height,10),h=document.body,g=0,c=0;var k=function(n){if(n===h||n===document.documentElement){return}g+=n.offsetTop;c+=n.offsetLeft;var l=n.style.transform||n.style.WebkitTransform||n.style.OTransform||n.style.MozTransform||n.style.msTransform;if(l){var e;if(e=l.match(/translate\((.+)px, (.+)px\)/)){g+=parseInt(e[2],10);c+=parseInt(e[1],10)}else{if(e=l.match(/translate3d\((.+)px, (.+)px, (.+)px\)/)){g+=parseInt(e[2],10);c+=parseInt(e[1],10)}else{if(e=l.match(/matrix3d\(([\-\d,\s]+)\)/)){var o=e[1].split(",");g+=parseInt(o[13],10);c+=parseInt(o[12],10)}else{if(e=l.match(/matrix\(.+, .+, .+, .+, (.+), (.+)\)/)){g+=parseInt(e[2],10);c+=parseInt(e[1],10)}}}}}};k(b);try{while(b=b.offsetParent){k(b)}}catch(f){}g+=h.offsetTop;c+=h.offsetLeft;g+=h.parentNode.offsetTop;c+=h.parentNode.offsetLeft;var d=document.defaultView?window.getComputedStyle(h.parentNode,null):h.parentNode.currentStyle;if(h.parentNode.offsetTop!==parseInt(d.marginTop,10)&&!isNaN(parseInt(d.marginTop,10))){g+=parseInt(d.marginTop,10);c+=parseInt(d.marginLeft,10)}return{top:g,left:c,height:j,width:a}},"$":function(a){return(typeof a==="string")?document.getElementById(a):a},eventoffset:function(b){var a=0;var c=0;if(!b){b=window.event}if(b.pageX||b.pageY){return{x:b.pageX,y:b.pageY}}else{if(b.clientX||b.clientY){return{x:b.clientX,y:b.clientY}}else{if(b.touches&&b.touches.length===1){return{x:b.touches[0].pageX,y:b.touches[0].pageY}}}}},limit:function(b,d,a){var c;return function(){var f=this,e=arguments;var g=function(){c=null;b.apply(f,e)};if(a){clearTimeout(c)}if(a||!c){c=setTimeout(g,d)}}},throttle:function(a,b){return this.limit(a,b,false)},sanitize:function(b){if(!b){return""}function a(d){if(/^(https?:\/\/|data:image)/.test(d)){return d}}function c(d){return d}return html_sanitize(b,a,c)}};wax=wax||{};wax.g=wax.g||{};wax.g.attribution=function(d,e){e=e||{};var c,b={};b.element=function(){return c.element()};b.appendTo=function(a){wax.u.$(a).appendChild(c.element());return this};b.init=function(){c=wax.attribution();c.content(e.attribution);c.element().className="map-attribution map-g";return this};return b.init()};wax=wax||{};wax.g=wax.g||{};wax.g.bwdetect=function(d,b){b=b||{};var a=b.png||".png128",f=b.jpg||".jpg70";if(!d.mapTypes["mb-low"]){var e=d.mapTypes.mb;var g={tiles:[],scheme:e.options.scheme,blankImage:e.options.blankImage,minzoom:e.minZoom,maxzoom:e.maxZoom,name:e.name,description:e.description};for(var c=0;c<e.options.tiles.length;c++){g.tiles.push(e.options.tiles[c].replace(".png",a).replace(".jpg",f))}m.mapTypes.set("mb-low",new wax.g.connector(g))}return wax.bwdetect(b,function(h){d.setMapTypeId(h?"mb":"mb-low")})};wax=wax||{};wax.g=wax.g||{};wax.g.hash=function(b){return wax.hash({getCenterZoom:function(){var c=b.getCenter(),e=b.getZoom(),d=Math.max(0,Math.ceil(Math.log(e)/Math.LN2));return[e.toFixed(2),c.lat().toFixed(d),c.lng().toFixed(d)].join("/")},setCenterZoom:function a(c){b.setCenter(new google.maps.LatLng(c[1],c[2]));b.setZoom(c[0])},bindChange:function(c){google.maps.event.addListener(b,"idle",c)},unbindChange:function(c){google.maps.event.removeListener(b,"idle",c)}})};wax=wax||{};wax.g=wax.g||{};wax.g.interaction=function(){var e=false,c,g;function a(){e=true}function d(){if(!e&&c){return c}else{c=[];var l=g.getZoom();var k=wax.u.offset(g.getDiv());var h=function(p){if(!p.interactive){return}for(var o in p.cache){if(o.split("/")[0]!=l){continue}var n=wax.u.offset(p.cache[o]);c.push([n.top,n.left,p.cache[o]])}};for(var j in g.mapTypes){h(g.mapTypes[j])}g.overlayMapTypes.forEach(h)}return c}function b(h){if(!arguments.length){return g}g=h;google.maps.event.addListener(g,"tileloaded",a);google.maps.event.addListener(g,"idle",a)}function f(h){google.maps.event.clearListeners(g,"tileloaded");google.maps.event.clearListeners(g,"idle")}return wax.interaction().attach(b).detach(f).parent(function(){return g.getDiv()}).grid(d)};wax=wax||{};wax.g=wax.g||{};wax.g.legend=function(c,d){d=d||{};var a,b={};b.add=function(){a=wax.legend().content(d.legend||"");return b};b.element=function(){return a.element()};b.appendTo=function(e){wax.u.$(e).appendChild(a.element());return b};return b.add()};var wax=wax||{};wax.g=wax.g||{};wax.g.connector=function(a){a=a||{};this.options={tiles:a.tiles,scheme:a.scheme||"xyz",blankImage:a.blankImage||"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};this.minZoom=a.minzoom||0;this.maxZoom=a.maxzoom||22;this.opacity= a.opacity;this.name=a.name||"";this.description=a.description||"";this.interactive=true;this.tileSize=new google.maps.Size(256,256);this.cache={}};wax.g.connector.prototype.getTile=function(e,d,b){var c=d+"/"+e.x+"/"+e.y;if(!this.cache[c]){var a=this.cache[c]=new Image(256,256);this.cache[c].src=this.getTileUrl(e,d);this.cache[c].setAttribute("gTileKey",c);this.cache[c].setAttribute("style","opacity: "+this.opacity+"; filter: alpha(opacity="+(this.opacity*100)+");");this.cache[c].onerror=function(){a.style.display="none"}}return this.cache[c]};wax.g.connector.prototype.releaseTile=function(b){var a=b.getAttribute("gTileKey");if(this.cache[a]){delete this.cache[a]}if(b.parentNode){b.parentNode.removeChild(b)}};wax.g.connector.prototype.getTileUrl=function(e,c){var b=Math.pow(2,c),d=(this.options.scheme==="tms")?(b-1)-e.y:e.y,a=(e.x%b);a=(a<0)?(e.x%b)+b:a;if(d<0){return this.options.blankImage}return this.options.tiles[parseInt(a+d,10)%this.options.tiles.length].replace("{z}",c).replace("{x}",a).replace("{y}",d)};