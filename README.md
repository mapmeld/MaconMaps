# MaconMaps

The repo for MaconMaps includes our <a href="http://maconmaps.com">event page</a>, <a href="http://maconmaps.heroku.com">NeighborDiff</a>, and some experimental maps for the Macon area.

NeighborDiff is a simple tool to update and detail geodata. We're looking for changes a university made in their neighborhood in the 5 years since the local government collected a buildings file.

## Examples

The building highlighted below was replaced by a parking lot. Drag and drop a red marker onto it to set it to Demolished.

<img src="http://i.imgur.com/LtC9E.png"/>

<hr/>

This former drive-thru bank has been re-opened as a pharmacy. Let's drag and drop a green marker to set it to Renovated.

<img src="http://i.imgur.com/68fpv.png"/>

<hr/>

The building under construction in the photo below is now a dormitory, and a journalism school is being built across the street. Drag and drop a yellow marker where new buildings should be added to the data.

<img src="http://i.imgur.com/iNxUD.png"/>

In the future, NeighborDiff will let you add more information by clicking on interesting buildings.

The output data can be added to OpenStreetMap with this site as proof of community review.

## About CartoDB

The buildings in NeighborDiff are stored on CartoDB. We use their Maps API to display and interact with the buildings, and their Node.js module + SQL API to change the status of buildings as you edit them.

<a href="http://cartodb.com">CartoDB</a> is a free/freemium mapping database from Vizzuality. You can upload shapefiles and Google Earth KML data to start creating a table.

## About MongoDB

Individual points (the new buildings) cannot be mixed with the buildings data on CartoDB. Instead of using an INSERT command, the points are stored separately in a free MongoDB database from MongoLabs.

## Other technologies used

Leaflet.js from Cloudmade, Wax from MapBox, Geocoder.us for address search

## About Poang

Poang ([github](https://github.com/BeyondFog/Poang)) is a Node.js/MongoDB app built using the [Express](http://expressjs.com/) framework. Poang uses [Everyauth](http://everyauth.com/) for local authentication, [Mongoose-Auth](https://github.com/bnoguchi/mongoose-auth) to connect Everyauth to MongoDB (and [Mongoose](http://mongoosejs.com/) as the ODM) for account persistence, and [Connect-Mongo](https://github.com/kcbanner/connect-mongo) as a session store. Most of the code in app.js was generated by Express and all of the code in auth.js after the Comment schema is straight from the Mongoose-Auth docs.

For testing, Poang uses the [Mocha](http://visionmedia.github.com/mocha/) test framework, [should](https://github.com/visionmedia/should.js) for assertions, [Sinon.JS](http://sinonjs.org/) for mocks & stubs, and [Zombie.js](http://zombie.labnotes.org/) for lightweight integration testing.

For more details, please see BeyondFog's [blog post](http://blog.beyondfog.com/?p=222) that walks through the various tests in Poang.

### Installation
 
1) Do a git clone:

    git clone git://github.com/mapmeld/MaconMaps.git
    
2) cd into the project directory and then install the necessary node modules:

    npm install -d

3) start up MongoDB if it's not already running:
  
    mongod --noprealloc --nojournal
    
4) start the node process:

    node app.js

### Deploy to Heroku

After you have created a new app on Heroku and pushed the code via git, you will need to use the Heroku Toolbelt from your command line to add the free MongoLab starter addon:

    heroku addons:add mongolab:starter
